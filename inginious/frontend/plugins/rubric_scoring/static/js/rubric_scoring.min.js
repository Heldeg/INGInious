let score=0,matrix=[];function removeClass(e){document.getElementById(e).classList.remove("box1")}function addClass(e){document.getElementById(e).classList.add("box1")}function removeSelectionOnRow(e){for(let t=0;t<5;t++)if(matrix[e][t].classList.contains("box1")){removeClass(`${e}-${t}`),score-=.2*(t+1);break}}function updateScore(){document.getElementById("output").innerHTML="Current Score: "+score.toFixed(1)}function displayTaskSubmitMessageRubric(e,t,o){let n=getAlertCode(e,t,o),a=document.getElementById("grade_edit_submit_status");if(document.getElementById("grade_edit_submit_status").innerHTML=n,a.style.display="block",o){let e=1,t=setInterval(function(){e<=.1&&(clearInterval(t),a.style.display="none"),a.style.opacity=e,a.style.filter="alpha(opacity="+100*e+")",e-=.05*e},50)}}function commentSubmit(){let e=document.getElementById("text_comment");e.value.length>1e3?displayTaskSubmitMessageRubric("Error at saving Comment, comment to long, max length of comment is 1000.","warning",!0):jQuery.ajax({success:function(e){displayTaskSubmitMessageRubric("Successfully saved","info",!0)},method:"POST",data:{comment:e.value},error:function(e,t,o){displayTaskSubmitMessageRubric("Error at saving Comment, please try again.","danger",!0)}})}function save(){jQuery.ajax({success:function(e){commentSubmit(),displayTaskSubmitMessageRubric("Submission graded and stored","info",!0)},method:"POST",data:{grade:score},error:function(e,t,o){displayTaskSubmitMessageRubric("Something went wrong","danger",!0)}})}jQuery(document).ready(function(){if(document.location.href.match(/submission/)){const e={java7:"java",java8:"java",cpp:"cpp",cpp11:"cpp",c:"c",c11:"c",python3:"python",vhdl:"vhdl",verilog:"verilog"};if("Notebook"===environment())$.ajax({url:urlRequest(),method:"GET",dataType:"json",success:function(e){render_notebook(e)}});else{const t=$("#myTextCode")[0];$("#myTextCodeArea").show();const o=e[t.getAttribute("data-language")];registerCodeEditor(t,o,20).setOption("readOnly","nocursor")}$("#info").click(function(){$("#text-context").collapse("toggle")});for(let e=0;e<5;e++){matrix[e]=[];for(let t=0;t<5;t++)matrix[e][t]=document.getElementById(e+"-"+t),matrix[e][t].addEventListener("click",function(){removeSelectionOnRow(e),addClass(e+"-"+t),score+=.2*(t+1),updateScore()}),matrix[e][t].addEventListener("dblclick",function(){removeClass(e+"-"+t),score-=.2*(t+1),updateScore()}),matrix[e][t].addEventListener("mouseover",function(){document.body.style.cursor="pointer"}),matrix[e][t].addEventListener("mouseout",function(){document.body.style.cursor="default"})}window.save=save}loadFeedbackCode()});