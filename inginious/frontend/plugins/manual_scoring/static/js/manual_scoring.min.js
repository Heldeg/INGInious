const COMMENTS_TEXT_AREA_ID="textComments",SAVE_BUTTON_ID="saveButton",PREVIEW_TAB_ID="preview_tab",PREVIEW_AREA_ID="preview_area";function save(e){const n=document.getElementById(COMMENTS_TEXT_AREA_ID);jQuery.ajax({success:function(n){new MessageBox(RESPONSE_FIELD_ID,"Submission graded and stored","info");updateScoreOnInfo(e.score)},method:"POST",data:{manual_grade:e.score.toFixed(1),comment:n.value,rubric:JSON.stringify(e.getSelectedFieldIds())},error:function(e,n,o){new MessageBox(RESPONSE_FIELD_ID,"Something went wrong","danger")}})}function updateScoreOnInfo(e){const n=new Score(GRADE_ID,e);n.updateScore(),n.changeColor()}function addSaveFunctionToSaveButton(e){$(`#${SAVE_BUTTON_ID}`).click(function(){save(e)})}function previewCode(){const e=document.getElementById(COMMENTS_TEXT_AREA_ID);$(`#${PREVIEW_TAB_ID}`).click(function(){$.ajax("/api/preview_content",{method:"POST",data:{content:e.value},success:function(e){$(`#${PREVIEW_AREA_ID}`).html(e)},error:function(e,n,o){new MessageBox(RESPONSE_FIELD_ID,"Something went wrong","danger")}})})}jQuery(document).ready(function(){const e=new CodeArea(CODE_AREA_ID,NOTEBOOK_CODE_AREA_ID,environmentType()),n=new Rubric,o=new CodeArea(COMMENTS_TEXT_AREA_ID),t=$(`#${GRADE_ID}`).data("grade"),a=new Score(GRADE_ID,t);let c=rubricStatus();e.displayCodeArea(),c=JSON.parse(c.replace(/&quot;/g,'"')),n.loadSelectedFields(c),n.makeRubricInteractive(),loadFeedBack(FEEDBACK_FIELD_ID),addToggleBehaviorToProblemDescription(TASK_NAME,TASK_DESCRIPTION_TEXT_ID),addSaveFunctionToSaveButton(n),o.showMultiLangCodeArea(),previewCode(),a.changeColor(),a.updateScore(),window.save=save});