$def with(course_id)

$var title: My Statistics

<ul class="nav nav-tabs">
    <li class="active"><a id="trials-circle-tab" data-toggle="tab" href="#trials-circle">Trials and Best Grade</a></li>
    <li><a id="bar-submissions-per-tasks-tab" data-toggle="tab" href="#bar-submissions-per-tasks">Bar Submissions Per Tasks</a></li>
</ul>

<div class="tab-content">
    <div id="trials-circle" class="tab-pane fade in active">
        <h3>Trials and Best Grade</h3>
        <div id="tries_per_task" style="width: 100%"><!-- Plotly chart will be drawn inside this DIV --></div>
        <a href='#' onclick='UserStatistics.trialsAndBestGradeStatistic.downloadCsvAsync();'>Download CSV</a>
    </div>
    <div id="bar-submissions-per-tasks" class="tab-pane fade">
        <h3>Bar Submissions Per Tasks</h3>
        <div id="submissions_per_task" style="height: 500px;"><!-- Plotly chart will be drawn inside this DIV --></div>
        <div class="normalize" id="normalize_submissions_per_task" style="display: flex;justify-content: center;">
          <button style="background-color: white;padding: 8px 15px;text-align: center;font-size: 12px;"
                  onclick="UserStatistics.barSubmissionsPerTasks.toggle_normalize()">
                  Toggle normalize
          </button>
        </div>
        <a href='#' onclick='UserStatistics.barSubmissionsPerTasks.downloadCsvAsync();'>Download CSV</a>
    </div>
</div>


<script>
    $$(function () {
        UserStatistics.trialsAndBestGradeStatistic = new UserTrialsAndBestGradeStatistic("$:course_id");
        UserStatistics.barSubmissionsPerTasks = new BarSubmissionsPerTasks("$:course_id");

        $$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            if(e.target.id === "trials-circle-tab"){
                UserStatistics.trialsAndBestGradeStatistic.plotAsync();
            }else if(e.target.id === "bar-submissions-per-tasks-tab"){
                UserStatistics.barSubmissionsPerTasks.plotAsync();
            }
        });
        $$('.active > a[data-toggle="tab"]').trigger('shown.bs.tab');
    });
</script>
