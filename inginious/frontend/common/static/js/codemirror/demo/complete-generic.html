<!doctype html>

<title>CodeMirror: Autocomplete Demo</title>
<meta charset="utf-8" />
<link rel=stylesheet href="../doc/docs.css">

<link rel="stylesheet" href="../lib/codemirror.css">
<link rel="stylesheet" href="../addon/hint/show-hint.css">
<script src="../lib/codemirror.js"></script>
<script src="../addon/hint/show-hint.js"></script>
<script src="../addon/hint/generic-hint.js"></script>
<script src="../mode/clike/clike.js"></script>
<script src="../mode/python/python.js"></script>
<script src="../mode/ruby/ruby.js"></script>
<script src="../mode/markdown/markdown.js"></script>

<div id=nav>
    <a href="http://codemirror.net">
        <h1>CodeMirror</h1><img id=logo src="../doc/logo.png"></a>

    <ul>
        <li><a href="../index.html">Home</a>
            <li><a href="../doc/manual.html">Manual</a>
                <li><a href="https://github.com/codemirror/codemirror">Code</a>
    </ul>
    <ul>
        <li><a class=active href="#">Autocomplete</a>
    </ul>
</div>

<article>
    <h2>Autocomplete Demo</h2>
    <form><textarea id="code" name="code">
package Model;

import java.math.BigInteger;
import java.util.ArrayList;
import java.util.Scanner;

import javax.swing.JOptionPane;

public class ReadAndSend {

  private static ReadImage reader;
  private static RSA rsa;
  private static int howMany;

  public static int howMany(){
    return howMany;
  }

  public static void chargeImage(String path){
    reader= new ReadImage();
    reader.readBMP(path);
    reader.mor = new Morphology(reader.image);
    reader.mor.boundaryDetection();
    reader.bound = reader.mor.getBounds();


    JOptionPane.showMessageDialog(null, "Tienes " + reader.bound.size() / 32 + " caracteres.");
    howMany = reader.bound.size() / 32;
  }

  public static void send(String mensaje, String image, int p, int q){
    //Reading the image and founding its bounds
    if(reader==null) {
      JOptionPane.showMessageDialog(null, "Para enviar un mensaje, debes primero cargar la imagen");
      return;
    }
    rsa = new RSA(p,q);
    JOptionPane.showMessageDialog(null,"Datos RSA: \nRecuerdelos, los datos N y d necesitarï¿½ el receptor\n"+rsa);
    reader.setMessageLength(rsa.encrypt(mensaje.length()));



    ArrayList<Integer> encryptedString = rsa.encryptedString(mensaje);
    reader.esteganographInts(encryptedString);

    reader.save("Binary_est");		//The image will be saved as bmp
    reader.display();
    ReadImage aux = new ReadImage(); aux.image = reader.mor.getBoundedImage(); aux.display();
    JOptionPane.showMessageDialog(null, "Mensaje Guardado correctamente en: Binary_est.bmp \nPuede cerrar el programa");
  }

  public static String read(String image, int d, int N){
    ReadImage reader= new ReadImage();
    reader.readBMP(image);
    reader.mor = new Morphology(reader.image);
    reader.mor.boundaryDetection();
    reader.bound = reader.mor.getBounds();

    int length = reader.getMessageLength();

    length = RSA.dec(length, d, N);

    return (RSA.decrypt(reader.discoverInts(length),d,N));
  }

  public static void main(String[] args) {

    ReadImage reader = new ReadImage();
    Scanner sc = new Scanner(System.in);
    System.out.println("[V]er, [E]nviar");
    char c = sc.nextLine().charAt(0);

    switch(c){
    case 'V':
      reader.readBMP("Binary_est.bmp");
      reader.mor = new Morphology(reader.image);
      reader.mor.boundaryDetection();
      reader.bound = reader.mor.getBounds();

      int length = reader.getMessageLength();
      System.out.println("Ingrese la clave publica y N");
      int d = 79843181;
      int N = 100903027;

      length = RSA.dec(length, d, N);

      System.out.println("Longitud del mensaje guardado: " + length);
      //System.out.println(reader.discoverInts(length));
      System.out.println(RSA.decrypt(reader.discoverInts(length),d,N));

      break;
    case 'E':
      //Reading the image and founding its bounds
      reader.readBMP("Binary.bmp");
      reader.mor = new Morphology(reader.image);
      reader.mor.boundaryDetection();
      reader.bound = reader.mor.getBounds();


      String mensaje="";

      System.out.println("Tienes " + reader.bound.size() / 32 + " caracteres." );
      System.out.println("Ingresa un mensaje: ");
      mensaje = sc.nextLine();

      RSA rsa = new RSA(1009,100003);
      reader.setMessageLength(rsa.encrypt(mensaje.length()));



      ArrayList<Integer> encryptedString = rsa.encryptedString(mensaje);
      reader.esteganographInts(encryptedString);

      reader.save("Binary_est");		//The image will be saved as bmp
      System.out.println("Para terminar el programa, cierre la ventana");
      reader.display();

      ReadImage aux = new ReadImage(); aux.image = reader.mor.getBoundedImage(); aux.display();

      break;

    }
    sc.close();
  }//main()ends
}
</textarea></form>

    <p>Press <strong>ctrl-space</strong> to activate autocompletion. Built on top of the <a href="../doc/manual.html#addon_show-hint"><code>show-hint</code></a>		and generic-hint addons.
    </p>

    <form><textarea style="display: none" id="cpp" name="cpp">
#include "graph.h"

Graph::Graph(){};

void Graph::add_node(string node){
  nodes.insert(node);
}

bool Graph::contains_node(string node){
  return nodes.find(node) != nodes.end();
}

void Graph::add_edge(string node_origin, string node_destination){
  edges.insert(make_pair(node_origin, node_destination));
}

bool Graph::contains_edge(string node_origin, string node_destination){
  return edges.find(make_pair(node_origin, node_destination)) != edges.end();
}
  </textarea></form>

    <p>
        Python example
    </p>
    <form><textarea style="display: none" id="python" name="python">
# Some Example code
import os
from package import ParentClass

@nonsenseDecorator
def doesNothing():
  pass

class ExampleClass(ParentClass):
  @staticmethod
  def example(inputStr):
    a = list(inputStr)
    a.reverse()
    return ''.join(a)

  def __init__(self, mixin = 'Hello'):
    self.mixin = mixin
</textarea></form>

    <p>
        Ruby example
    </p>

<form><textarea style="display: none" id="ruby" name="ruby">
require_relative '../code_file_manager'

class AbstractLinter
  include(CodeFileManager)

  def initialize(code="")
    @file_absolute_path = next_file_absolute_path + extention
    @code = code
  end

  def perform_lint
    write_code_to_file(@file_absolute_path, @code)
    response = results
    erase_file(@file_absolute_path)
    response
  end

  def results
    []
  end

  def extention
    ".txt"
  end
end
</textarea></form>
    <script>
        var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
            lineNumbers: true,
            extraKeys: { "Ctrl-Space": "autocomplete" },
            mode: "text/x-java",
            tabSize: 2
        });

        var editor2 = CodeMirror.fromTextArea(document.getElementById("cpp"), {
            extraKeys: { "Ctrl-Space": "autocomplete" },
            lineNumbers: true,
            lineWrapping: true,
            mode: "text/x-c++src",
            tabSize: 2
        });

        var editorPython = CodeMirror.fromTextArea(document.getElementById("python"), {
            extraKeys: { "Ctrl-Space": "autocomplete" },
            lineNumbers: true,
            lineWrapping: true,
            mode: {
                name: "python",
                version: 3,
                singleLineStringErrors: false
            },
            tabSize: 2
        });

        var editorRuby = CodeMirror.fromTextArea(document.getElementById("ruby"), {
            lineNumbers: true,
            lineWrapping: true,
            mode: "text/x-ruby",
            tabSize: 2,
            extraKeys: { "Ctrl-Space": "autocomplete" }
        });
    </script>
</article>
